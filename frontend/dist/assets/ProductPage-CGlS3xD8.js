import{u as v,a as w,b as q,r as i,j as t,c as C,d as P}from"./index-Dgio6lqn.js";import{a as k}from"./utils-uYTjRYPR.js";import{I as E,B as d}from"./button-B5uu4QJ1.js";const Q=()=>{const{name:e}=v(),m=w(),{dispatch:f}=q(),[o,p]=i.useState(""),[x,y]=i.useState(0),[s,c]=i.useState(0),[l,u]=i.useState(!0),[g,h]=i.useState({quantity:""});i.useEffect(()=>{const r=new URLSearchParams(m.search).get("image");r&&p(r),e&&e.toLowerCase()==="eggs"&&s<12&&(c(12),h(n=>({...n,quantity:"Minimum quantity for eggs is 12"}))),(async()=>{try{const n=await k.get(`http://localhost:3000/api/v1/market/prices/${e}`);y(n.data.price)}catch(n){console.error("Error fetching product price:",n)}finally{u(!1)}})()},[m.search,e,s]);const b=()=>{let a=!0;const r={quantity:""};return s?Number(s)<=0&&(r.quantity="Quantity must be greater than zero",a=!1):(r.quantity="Quantity is required",a=!1),h(r),a},j=()=>{b()&&(u(!0),setTimeout(()=>f({type:"ADD_TO_CART",payload:{name:e||"",quantity:Number(s),image:o,price:x}}),2e3),u(!1),P.success("Added to cart"))},N=x*Number(s);return l?t.jsx(C,{}):t.jsx("div",{className:"text-black dark:text-white bg-gray-200 dark:bg-zinc-800 min-h-screen p-4",children:t.jsx("div",{className:"container mx-auto max-w-6xl",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[t.jsx("div",{className:"flex justify-center items-center",children:o&&t.jsx("img",{src:o,alt:e,className:"w-full max-w-md h-auto object-contain rounded-lg"})}),t.jsxs("div",{className:"flex flex-col gap-6",children:[t.jsx("h1",{className:"text-3xl font-bold",children:e}),t.jsxs("div",{className:"w-full",children:[t.jsx("label",{htmlFor:"quantity",className:"block text-lg font-medium",children:"Quantity (kg):"}),t.jsx(E,{id:"quantity",className:"rounded mt-2",name:"quantity",type:"number",value:s,onChange:a=>c(Number(a.target.value)),placeholder:"Enter quantity"}),g.quantity&&t.jsx("p",{className:"text-red-500 text-sm mt-1",children:g.quantity})]}),e&&e.toLowerCase()!=="eggs"&&t.jsxs("div",{className:"flex flex-wrap gap-2",children:[e&&e.toLowerCase()==="mutton"&&t.jsx(d,{variant:"outline",onClick:()=>c(.25),children:"250g"}),[.5,1,1.5,2,2.5,3,3.5,4,4.5,5].map(a=>t.jsxs(d,{variant:"outline",onClick:()=>c(a),children:[a,"kg"]},a))]}),t.jsxs("div",{className:"text-2xl font-semibold",children:["Total Price: â‚¹",N.toFixed(2)]}),t.jsx(d,{type:"button",onClick:j,className:"w-full bg-blue-500 hover:bg-blue-700 text-white py-3 rounded-lg",disabled:l,children:l?"Adding to Cart...":"Add to Cart"})]})]})})})};export{Q as default};
