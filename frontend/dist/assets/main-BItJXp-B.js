import{r as c,j as e}from"./index-jaa7Nty4.js";import{c as n,a as h}from"./utils-uYTjRYPR.js";const u=c.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:n("w-full caption-bottom text-sm",t),...r})}));u.displayName="Table";const b=c.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:n("[&_tr]:border-b",t),...r}));b.displayName="TableHeader";const j=c.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:n("[&_tr:last-child]:border-0",t),...r}));j.displayName="TableBody";const y=c.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:n("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));y.displayName="TableFooter";const p=c.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:n("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));p.displayName="TableRow";const d=c.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:n("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r}));d.displayName="TableHead";const i=c.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:n("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r}));i.displayName="TableCell";const w=c.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:n("mt-4 text-sm text-muted-foreground",t),...r}));w.displayName="TableCaption";const v=()=>{const[t,r]=c.useState([]);return c.useEffect(()=>{const s=async()=>{try{const l=await h.get("https://supreme-computing-machine-w5p4g6xjx6jcw7x-3000.app.github.dev/api/v1/order");r(l.data.orders.reverse())}catch(l){console.error("Error fetching orders:",l)}};s();const o=setInterval(s,5e3);return()=>clearInterval(o)},[]),e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Orders"}),e.jsxs(u,{children:[e.jsx(b,{children:e.jsxs(p,{children:[e.jsx(d,{children:"Name"}),e.jsx(d,{children:"Quantity"}),e.jsx(d,{children:"Address"}),e.jsx(d,{children:"Phone"}),e.jsx(d,{children:"Items"}),e.jsx(d,{children:"Created At"})]})}),e.jsx(j,{children:t.map(s=>e.jsxs(p,{children:[e.jsx(i,{children:s.name}),e.jsx(i,{children:s.quantity}),e.jsx(i,{children:s.address}),e.jsx(i,{children:e.jsx("a",{href:`tel:${s.phone}`,children:s.phone})}),e.jsx(i,{children:s.items.map((o,l)=>e.jsxs("div",{children:[o.name," - ",o.quantity," x RS: ",o.price.toFixed(2)]},l))}),e.jsx(i,{children:new Date(s.createdAt).toLocaleString()})]},s._id))})]})]})},P=()=>{const[t,r]=c.useState([]),[s,o]=c.useState(null),[l,m]=c.useState("");c.useEffect(()=>{(async()=>{try{const x=await h.get("https://supreme-computing-machine-w5p4g6xjx6jcw7x-3000.app.github.dev/api/v1/market/prices");r(x.data)}catch(x){console.error("Error fetching product prices:",x)}})()},[]);const f=a=>{o(a),m(a.price)},g=a=>{m(Number(a.target.value))},N=async()=>{if(s&&l!=="")try{const a=await h.put(`https://butcher-jtol.onrender.com/api/v1/market/prices/${s._id}`,{price:l});r(t.map(x=>x._id===s._id?a.data:x)),o(null),m("")}catch(a){console.error("Error updating product price:",a)}};return e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Product Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Product Prices"}),e.jsx("ul",{children:t.map(a=>e.jsx("li",{className:"mb-2",children:e.jsxs("button",{className:"text-blue-500 hover:underline",onClick:()=>f(a),children:[a.product,": ",a.price]})},a._id))})]}),e.jsx("div",{children:s&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Update Price for ",s.product]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),N()},className:"flex flex-col gap-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700",children:"New Price"}),e.jsx("input",{type:"number",value:l,onChange:g,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Update Price"})]})]})})]})]})},k=()=>e.jsxs(e.Fragment,{children:[e.jsx(v,{}),e.jsx(P,{})]});export{k as default};
