import{r as c,j as e}from"./index-CkEZBD4C.js";import{c as d,a as h}from"./utils-uYTjRYPR.js";const u=c.forwardRef(({className:r,...t},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:d("w-full caption-bottom text-sm",r),...t})}));u.displayName="Table";const b=c.forwardRef(({className:r,...t},s)=>e.jsx("thead",{ref:s,className:d("[&_tr]:border-b",r),...t}));b.displayName="TableHeader";const j=c.forwardRef(({className:r,...t},s)=>e.jsx("tbody",{ref:s,className:d("[&_tr:last-child]:border-0",r),...t}));j.displayName="TableBody";const y=c.forwardRef(({className:r,...t},s)=>e.jsx("tfoot",{ref:s,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...t}));y.displayName="TableFooter";const p=c.forwardRef(({className:r,...t},s)=>e.jsx("tr",{ref:s,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...t}));p.displayName="TableRow";const n=c.forwardRef(({className:r,...t},s)=>e.jsx("th",{ref:s,className:d("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t}));n.displayName="TableHead";const i=c.forwardRef(({className:r,...t},s)=>e.jsx("td",{ref:s,className:d("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...t}));i.displayName="TableCell";const v=c.forwardRef(({className:r,...t},s)=>e.jsx("caption",{ref:s,className:d("mt-4 text-sm text-muted-foreground",r),...t}));v.displayName="TableCaption";const w=()=>{const[r,t]=c.useState([]);return c.useEffect(()=>{const s=async()=>{try{const l=await h.get("/api/v1/order");t(l.data.orders.reverse())}catch(l){console.error("Error fetching orders:",l)}};s();const o=setInterval(s,5e3);return()=>clearInterval(o)},[]),e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Orders"}),e.jsxs(u,{children:[e.jsx(b,{children:e.jsxs(p,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Quantity"}),e.jsx(n,{children:"Address"}),e.jsx(n,{children:"Phone"}),e.jsx(n,{children:"Items"}),e.jsx(n,{children:"Created At"})]})}),e.jsx(j,{children:r.map(s=>e.jsxs(p,{children:[e.jsx(i,{children:s.name}),e.jsx(i,{children:s.quantity}),e.jsx(i,{children:s.address}),e.jsx(i,{children:e.jsx("a",{href:`tel:${s.phone}`,children:s.phone})}),e.jsx(i,{children:s.items.map((o,l)=>e.jsxs("div",{children:[o.name," - ",o.quantity," x RS: ",o.price.toFixed(2)]},l))}),e.jsx(i,{children:new Date(s.createdAt).toLocaleString()})]},s._id))})]})]})},P=()=>{const[r,t]=c.useState([]),[s,o]=c.useState(null),[l,m]=c.useState("");c.useEffect(()=>{(async()=>{try{const x=await h.get("/api/v1/market/prices");t(x.data)}catch(x){console.error("Error fetching product prices:",x)}})()},[]);const f=a=>{o(a),m(a.price)},N=a=>{m(Number(a.target.value))},g=async()=>{if(s&&l!=="")try{const a=await h.put(`/api/v1/market/prices/${s._id}`,{price:l});t(r.map(x=>x._id===s._id?a.data:x)),o(null),m("")}catch(a){console.error("Error updating product price:",a)}};return e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Product Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Product Prices"}),e.jsx("ul",{children:r.map(a=>e.jsx("li",{className:"mb-2",children:e.jsxs("button",{className:"text-blue-500 hover:underline",onClick:()=>f(a),children:[a.product,": ",a.price]})},a._id))})]}),e.jsx("div",{children:s&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Update Price for ",s.product]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),g()},className:"flex flex-col gap-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700",children:"New Price"}),e.jsx("input",{type:"number",value:l,onChange:N,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Update Price"})]})]})})]})]})},k=()=>e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(P,{})]});export{k as default};
