import{u as w,a as N,b as q,r as i,j as e,c as C,d as P}from"./index-jaa7Nty4.js";import{a as k}from"./utils-uYTjRYPR.js";import{I as E,B as d}from"./button-DTgjKqaJ.js";const Q=()=>{const{name:t}=w(),m=N(),{dispatch:h}=q(),[l,f]=i.useState(""),[g,y]=i.useState(0),[s,c]=i.useState(0),[u,o]=i.useState(!0),[x,p]=i.useState({quantity:""});i.useEffect(()=>{o(!0);const r=new URLSearchParams(m.search).get("image");r&&f(r),t&&t.toLowerCase()==="eggs"&&s<12&&(c(12),p(n=>({...n,quantity:"Minimum quantity for eggs is 12"}))),(async()=>{console.log("Fetching product price..."),console.log("https://supreme-computing-machine-w5p4g6xjx6jcw7x-3000.app.github.dev");try{const n=await k.get(`https://supreme-computing-machine-w5p4g6xjx6jcw7x-3000.app.github.dev/api/v1/market/prices/${t}`);y(n.data.price)}catch(n){console.error("Error fetching product price:",n)}finally{o(!1)}})()},[m.search,t,s]);const j=()=>{let a=!0;const r={quantity:""};return s?Number(s)<=0&&(r.quantity="Quantity must be greater than zero",a=!1):(r.quantity="Quantity is required",a=!1),p(r),a},b=()=>{j()&&(o(!0),setTimeout(()=>h({type:"ADD_TO_CART",payload:{name:t||"",quantity:Number(s),image:l,price:g}}),2e3),o(!1),P.success("Added to cart"))},v=g*Number(s);return u?e.jsx(C,{}):e.jsx("div",{className:"text-black dark:text-white bg-gray-200 dark:bg-zinc-800 min-h-screen p-4",children:e.jsx("div",{className:"container mx-auto max-w-6xl",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{className:"flex justify-center items-center",children:l&&e.jsx("img",{src:l,alt:t,className:"w-full max-w-md h-auto object-contain rounded-lg"})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:t}),e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"quantity",className:"block text-lg font-medium",children:"Quantity (kg):"}),e.jsx(E,{id:"quantity",className:"rounded mt-2",name:"quantity",type:"number",value:s,onChange:a=>c(Number(a.target.value)),placeholder:"Enter quantity"}),x.quantity&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:x.quantity})]}),t&&t.toLowerCase()!=="eggs"&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t&&t.toLowerCase()==="mutton"&&e.jsx(d,{variant:"outline",onClick:()=>c(.25),children:"250g"}),[.5,1,1.5,2,2.5,3,3.5,4,4.5,5].map(a=>e.jsxs(d,{variant:"outline",onClick:()=>c(a),children:[a,"kg"]},a))]}),e.jsxs("div",{className:"text-2xl font-semibold",children:["Total Price: â‚¹",v.toFixed(2)]}),e.jsx(d,{type:"button",onClick:b,className:"w-full bg-blue-500 hover:bg-blue-700 text-white py-3 rounded-lg",disabled:u,children:u?"Adding to Cart...":"Add to Cart"})]})]})})})};export{Q as default};
