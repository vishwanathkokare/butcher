import{r as l,j as e}from"./index-Dgio6lqn.js";import{c as d,a as h}from"./utils-uYTjRYPR.js";const u=l.forwardRef(({className:t,...r},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:d("w-full caption-bottom text-sm",t),...r})}));u.displayName="Table";const b=l.forwardRef(({className:t,...r},s)=>e.jsx("thead",{ref:s,className:d("[&_tr]:border-b",t),...r}));b.displayName="TableHeader";const j=l.forwardRef(({className:t,...r},s)=>e.jsx("tbody",{ref:s,className:d("[&_tr:last-child]:border-0",t),...r}));j.displayName="TableBody";const y=l.forwardRef(({className:t,...r},s)=>e.jsx("tfoot",{ref:s,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...r}));y.displayName="TableFooter";const p=l.forwardRef(({className:t,...r},s)=>e.jsx("tr",{ref:s,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...r}));p.displayName="TableRow";const n=l.forwardRef(({className:t,...r},s)=>e.jsx("th",{ref:s,className:d("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r}));n.displayName="TableHead";const i=l.forwardRef(({className:t,...r},s)=>e.jsx("td",{ref:s,className:d("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...r}));i.displayName="TableCell";const v=l.forwardRef(({className:t,...r},s)=>e.jsx("caption",{ref:s,className:d("mt-4 text-sm text-muted-foreground",t),...r}));v.displayName="TableCaption";const w=()=>{const[t,r]=l.useState([]);return l.useEffect(()=>{const s=async()=>{try{const c=await h.get("http://localhost:3000/api/v1/order");r(c.data.orders.reverse())}catch(c){console.error("Error fetching orders:",c)}};s();const o=setInterval(s,5e3);return()=>clearInterval(o)},[]),e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Orders"}),e.jsxs(u,{children:[e.jsx(b,{children:e.jsxs(p,{children:[e.jsx(n,{children:"Name"}),e.jsx(n,{children:"Quantity"}),e.jsx(n,{children:"Address"}),e.jsx(n,{children:"Phone"}),e.jsx(n,{children:"Items"}),e.jsx(n,{children:"Created At"})]})}),e.jsx(j,{children:t.map(s=>e.jsxs(p,{children:[e.jsx(i,{children:s.name}),e.jsx(i,{children:s.quantity}),e.jsx(i,{children:s.address}),e.jsx(i,{children:e.jsx("a",{href:`tel:${s.phone}`,children:s.phone})}),e.jsx(i,{children:s.items.map((o,c)=>e.jsxs("div",{children:[o.name," - ",o.quantity," x RS: ",o.price.toFixed(2)]},c))}),e.jsx(i,{children:new Date(s.createdAt).toLocaleString()})]},s._id))})]})]})},P=()=>{const[t,r]=l.useState([]),[s,o]=l.useState(null),[c,m]=l.useState("");l.useEffect(()=>{(async()=>{try{const x=await h.get("http://localhost:3000/api/v1/market/prices");r(x.data)}catch(x){console.error("Error fetching product prices:",x)}})()},[]);const f=a=>{o(a),m(a.price)},N=a=>{m(Number(a.target.value))},g=async()=>{if(s&&c!=="")try{const a=await h.put(`http://localhost:3000/api/v1/market/prices/${s._id}`,{price:c});r(t.map(x=>x._id===s._id?a.data:x)),o(null),m("")}catch(a){console.error("Error updating product price:",a)}};return e.jsxs("div",{className:"container mx-auto py-10 px-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Product Management"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Product Prices"}),e.jsx("ul",{children:t.map(a=>e.jsx("li",{className:"mb-2",children:e.jsxs("button",{className:"text-blue-500 hover:underline",onClick:()=>f(a),children:[a.product,": ",a.price]})},a._id))})]}),e.jsx("div",{children:s&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Update Price for ",s.product]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),g()},className:"flex flex-col gap-4",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700",children:"New Price"}),e.jsx("input",{type:"number",value:c,onChange:N,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm",required:!0})]}),e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Update Price"})]})]})})]})]})},k=()=>e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx(P,{})]});export{k as default};
